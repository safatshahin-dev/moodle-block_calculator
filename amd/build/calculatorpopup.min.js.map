{"version":3,"sources":["../src/calculatorpopup.js"],"names":["define","$","templates","notification","ModalFactory","ModalEvents","init","buttonpromise","render","done","html","container","before","fail","exception","document","keydown","e","key","trigger","calculatorpromise","calculator","on","preventDefault","stopPropagation","create","title","body","type","types","DEFAULT","then","modal","show","getRoot","draggable","handle","hidden","destroy"],"mappings":"AAeAA,OAAM,2CACF,CAAC,QAAD,CAAW,gBAAX,CAA6B,mBAA7B,CAAkD,oBAAlD,CAAwE,mBAAxE,CAA6F,UAA7F,CADE,CAEF,SAAUC,CAAV,CAAaC,CAAb,CAAwBC,CAAxB,CAAsCC,CAAtC,CAAoDC,CAApD,CAA2E,CA0CvE,MAzCsB,CAClBC,IAAI,CAAE,eAAY,CACd,GAAIC,CAAAA,CAAa,CAAGL,CAAS,CAACM,MAAV,CAAiB,qCAAjB,CAAwD,EAAxD,CAApB,CACAD,CAAa,CAACE,IAAd,CAAmB,SAAUC,CAAV,CAAgB,CAC/B,GAAIC,CAAAA,CAAS,CAAGV,CAAC,CAAC,cAAD,CAAjB,CACAU,CAAS,CAACC,MAAV,CAAiBF,CAAjB,CACH,CAHD,EAGGG,IAHH,CAGQV,CAAY,CAACW,SAHrB,EAKAb,CAAC,CAACc,QAAD,CAAD,CAAYC,OAAZ,CAAoB,SAASC,CAAT,CAAY,CAC5B,GAAa,OAAT,EAAAA,CAAC,CAACC,GAAN,CAAsB,CAClBD,CAAC,CAACC,GAAF,CAAQ,GACX,CACDjB,CAAC,CAAC,sBAAuBgB,CAAC,CAACC,GAAzB,CAA+B,KAAhC,CAAD,CAAuCC,OAAvC,CAA+C,OAA/C,CACH,CALD,EAOA,GAAIC,CAAAA,CAAiB,CAAGlB,CAAS,CAACM,MAAV,CAAiB,2CAAjB,CAA8D,EAA9D,CAAxB,CACAY,CAAiB,CAACX,IAAlB,CAAuB,SAAUY,CAAV,CAAsB,CACzCpB,CAAC,CAACc,QAAD,CAAD,CAAYO,EAAZ,CAAe,OAAf,CAAwB,sCAAxB,CAAgE,SAAUL,CAAV,CAAa,CACzEA,CAAC,CAACM,cAAF,GACAN,CAAC,CAACO,eAAF,GAEApB,CAAY,CAACqB,MAAb,CAAoB,CAChBC,KAAK,CAAE,EADS,CAEhBC,IAAI,CAAEN,CAFU,CAGhBO,IAAI,CAAExB,CAAY,CAACyB,KAAb,CAAmBC,OAHT,CAApB,EAIGC,IAJH,CAIQ,SAAUC,CAAV,CAAiB,CACrBA,CAAK,CAACC,IAAN,GAEAhC,CAAC,CAAC+B,CAAK,CAACE,OAAN,EAAD,CAAD,CAAmBC,SAAnB,CAA6B,CACzBC,MAAM,CAAE,eADiB,CAA7B,EAIAJ,CAAK,CAACE,OAAN,GAAgBZ,EAAhB,CAAmBjB,CAAW,CAACgC,MAA/B,CAAuC,UAAW,CAC9CpC,CAAC,CAAC,8BAAD,CAAD,CAAgCkB,OAAhC,CAAwC,OAAxC,EACAa,CAAK,CAACM,OAAN,EACH,CAHD,CAIH,CAfD,CAgBH,CApBD,CAqBH,CAtBD,EAsBGzB,IAtBH,CAsBQV,CAAY,CAACW,SAtBrB,CAuBH,CAvCiB,CA0CzB,CA7CC,CAAN","sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with\n// Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\ndefine(\n    ['jquery', 'core/templates', 'core/notification', 'core/modal_factory', 'core/modal_events', 'jqueryui'],\n    function ($, templates, notification, ModalFactory, ModalEvents, jqueryui) {\n        var calculatorpopup = {\n            init: function () {\n                var buttonpromise = templates.render('block_simple_calculator/popupbutton', {});\n                buttonpromise.done(function (html) {\n                    var container = $('#page-footer');\n                    container.before(html);\n                }).fail(notification.exception);\n\n                $(document).keydown(function(e) {\n                    if (e.key == 'Enter') {\n                        e.key = '=';\n                    }\n                    $('[data-keybinding=\"' + e.key + '\"]').trigger('click');\n                });\n\n                var calculatorpromise = templates.render('block_simple_calculator/simple_calculator', {});\n                calculatorpromise.done(function (calculator) {\n                    $(document).on('click', '#block-calculator-output-popupbutton', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n\n                        ModalFactory.create({\n                            title: '',\n                            body: calculator,\n                            type: ModalFactory.types.DEFAULT,\n                        }).then(function (modal) {\n                            modal.show();\n\n                            $(modal.getRoot()).draggable({\n                                handle: \".modal-header\"\n                            });\n\n                            modal.getRoot().on(ModalEvents.hidden, function() {\n                                $('[data-keybinding=\"Delete\"]').trigger('click'); // Reset calculator state.\n                                modal.destroy();\n                            });\n                        });\n                    });\n                }).fail(notification.exception);\n            },\n        };\n        return calculatorpopup;\n    });\n"],"file":"calculatorpopup.min.js"}